!function(a,b){"function"==typeof define&&define.amd?define(["angular"],b):a.taggedClientStorage=b(a.angular)}(this,function(a){"use strict";var b=a.module("tagged.services.client-storage",[]);return b.factory("taggedClientStorage",function(b,c){var d,e={getItem:function(a){if(!c.cookie.length)return null;var b=c.cookie.indexOf(a+"=");if(-1==b)return null;b=b+a.length+1;var d=c.cookie.indexOf(";",b);return-1==d&&(d=c.cookie.length),unescape(c.cookie.substring(b,d))},setItem:function(a,b){var d=new Date;d.setTime(d.getTime()+31536e6),c.cookie=escape(a)+"="+escape(b)+"; path=/; expires="+d.toGMTString()},removeItem:function(a){var b=new Date;b.setTime(b.getTime()+-1e6),c.cookie=escape(a)+"=; path=/; expires="+b.toGMTString()}},f={};try{d="localStorage"in b&&null!==b.localStorage}catch(g){d=!1}var h=d?b.localStorage:e,i=function(a){this.namespace=a};return i.prototype.getAll=function(){var b;try{b=a.fromJson(h.getItem(this.namespace))}catch(c){b={}}return a.isObject(b)||(b={}),b},i.prototype.get=function(a){var b=this.getAll();return b[a]},i.prototype.set=function(b,c){var d=this.getAll();d[b]=c,h.setItem(this.namespace,a.toJson(d))},i.prototype.clear=function(b){var c=this.getAll();delete c[b],h.setItem(this.namespace,a.toJson(c))},i.prototype.clearAll=function(){h.removeItem(this.namespace)},function(a){return a in f?f[a]:(f[a]=new i(a),f[a])}}),b});